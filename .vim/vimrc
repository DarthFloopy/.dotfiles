
set nocompatible

set backspace=indent,eol,start

set noexpandtab
set tabstop=4
set shiftwidth=4
set autoindent

if has("autocmd")
	filetype plugin indent on
endif

autocmd BufRead,BufNewFile *.md set filetype=markdown
" TO DO: consider set lbr for text files too
autocmd FileType markdown set linebreak
autocmd FileType markdown inoremap ``` ```<CR>```<Esc>O

if has("gui_running")
	set guifont=UbuntuMono-Bold:h16
	set columns=140
	set hlsearch
	set linespace=2

	" Try to get rid of middle-click-to-paste
	nnoremap <MiddleMouse> <Nop>
	nnoremap <2-MiddleMouse> <Nop>
	nnoremap <3-MiddleMouse> <Nop>
	nnoremap <4-MiddleMouse> <Nop>

	inoremap <MiddleMouse> <Nop>
	inoremap <2-MiddleMouse> <Nop>
	inoremap <3-MiddleMouse> <Nop>
	inoremap <4-MiddleMouse> <Nop>
endif

colorscheme solarized8_high
if system("defaults read -g AppleInterfaceStyle") =~ '^Dark'
  set background=dark
else
  set background=light
endif

syntax on
set ruler
set number relativenumber
augroup numbertoggle
	autocmd!
	autocmd BufEnter,FocusGained,InsertLeave * set relativenumber
	autocmd BufLeave,FocusLost,InsertEnter   * set norelativenumber
augroup END

set incsearch

map <Space> <Nop>
let mapleader = " "
vnoremap <Leader>j :m '>+1<CR>gv=gv
vnoremap <Leader>k :m '<-2<CR>gv=gv
nnoremap <Leader>a GVgg
nnoremap <Leader>l :set invlist<CR>
function ToggleDarkBackground()
	if &background == 'dark'
		set background=light
	elseif &background == 'light'
		set background=dark
	endif
endfunction
nnoremap <Leader>b :call ToggleDarkBackground()<CR>

nnoremap <Space>= <Nop>
autocmd Filetype text,markdown nnoremap <Space>= vipJA.<Backspace><Esc>

"inoremap ii <Esc>
inoremap jk <Esc>
inoremap kj <Esc>
"inoremap ja <Esc>ja
inoremap jA <Esc>jA
inoremap jI <Esc>jI

vnoremap v <Esc>

set shell=bash
set shellcmdflag=-ic

set mouse=a

" From here on is plugin config

let g:comfortable_motion_friction = 300.0

"let g:better_whitespace_enabled=0

if !exists('g:airline_symbols')
	let g:airline_symbols = {}
endif
let g:airline_symbols.branch = '⎇ '
let g:airline_symbols.maxlinenr = ''

let delimitMate_expand_cr = 1

set updatetime=500

let g:user_emmet_leader_key=','
let g:user_emmet_install_global = 0
autocmd FileType html,css EmmetInstall
let g:user_emmet_mode='i'

set nolist
set listchars=eol:¶,tab:⇥\ ,space:·
highlight NonText guibg=NONE ctermbg=NONE
highlight SpecialKey guibg=NONE ctermbg=NONE
highlight Comment ctermfg=777 guifg=#aaaaaa


